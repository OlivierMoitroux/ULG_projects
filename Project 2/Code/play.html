<!DOCTYPE html>
<html>

<meta charset="utf-8" />

<head><style>
.bigBubble{
border: 4px solid grey;
border-radius: 50%;
width: 35px;
height: 35px;
background-color: LightGrey;

}
.smallBubble{
border: 4px solid grey;
border-radius: 50%;
width: 15px;
height: 15px;
background-color: LightGrey;

}
.choice{

margin-top: 300px;
margin-left: 950px;
visibility: hidden;
}

.errorMsg{
height: 50px;
width: 200px;
border: 6px solid red;
position: fixed;
bottom: 40%;
right: 45%;
visibility:hidden;
text-align: center;
text-transform: uppercase;
background-color: white;
line-height: 3;
}

.winMsg {
    height: 50px;
    width: 200px;
    border: 6px solid green;
    position: fixed;
    bottom: 40%;
    right: 45%;
    visibility:hidden;
    text-align: center;
    text-transform: uppercase;
    background-color: white;
    line-height: 3;
}
</style></head>

<body style="background-color:white;" onLoad="javascript:makeVisible()">

    <h1 style="text-align:center; color:blue;"><br>Mastermind<br></h1>

    <table style="width:25%; position:absolute; left: 380px ;margin-top: 50px;">
  <tr>
  <th >
  <div id= "bigBubble1-1" class="bigBubble">
  </div>
  </th>
  <th >
  <div id= "bigBubble2-1" class="bigBubble">
  </div>
  </th>
  <th >
  <div id= "bigBubble3-1" class="bigBubble">
  </div>
  </th>
  <th >
  <div  id= "bigBubble4-1" class="bigBubble">
  </div>
  </th>
  <th >
  <th >
  <div style="padding-right: 50px;">
  </div>
  </th>
  <th >
  <div id= "smallBubble1-1" class="smallBubble">
  </div>
  </th>
  <th >
  <div id= "smallBubble2-1" class="smallBubble">
  </div>
  </th>
  <th >
  <div id= "smallBubble3-1" class="smallBubble">
  </div>
  </th>
  <th >
  <div id= "smallBubble4-1" class="smallBubble">
  </div>
  </th>
  </tr>
  <!-- New Line -->

  <tr>
  <th >
  <div id= "bigBubble1-2" class="bigBubble">
  </div>
  </th>
  <th >
  <div id= "bigBubble2-2" class="bigBubble">
  </div>
  </th>
  <th >
  <div id= "bigBubble3-2"  class="bigBubble">
  </div>
  </th>
  <th >
  <div id= "bigBubble4-2" class="bigBubble">
  </div>
  </th>
  <th >
  <th >
  <div style="padding-right: 50px;">
  </div>
  </th>
  <th >
  <div id= "smallBubble1-2" class="smallBubble">
  </div>
  </th>
  <th >
  <div id= "smallBubble2-2" class="smallBubble">
  </div>
  </th>
  <th >
  <div id= "smallBubble3-2" class="smallBubble">
  </div>
  </th>
  <th >
  <div id= "smallBubble4-2" class="smallBubble">
  </div>
  </th>
  </tr>


  <!-- New Line -->

  <tr>
  <th >
  <div id= "bigBubble1-3" class="bigBubble">
  </div>
  </th>
  <th >
  <div id= "bigBubble2-3" class="bigBubble">
  </div>
  </th>
  <th >
  <div id= "bigBubble3-3" class="bigBubble">
  </div>
  </th>
  <th >
  <div id= "bigBubble4-3" class="bigBubble">
  </div>
  </th>
  <th >
  <th >
  <div style="padding-right: 50px;">
  </div>
  </th>
  <th >
  <div id= "smallBubble1-3" class="smallBubble">
  </div>
  </th>
  <th >
  <div id= "smallBubble2-3" class="smallBubble">
  </div>
  </th>
  <th >
  <div id= "smallBubble3-3" class="smallBubble">
  </div>
  </th>
  <th >
  <div id= "smallBubble4-3" class="smallBubble">
  </div>
  </th>
  </tr>

  <!-- New Line -->

  <tr>
  <th >
  <div id= "bigBubble1-4" class="bigBubble">
  </div>
  </th>
  <th >
  <div id= "bigBubble2-4" class="bigBubble">
  </div>
  </th>
  <th >
  <div id= "bigBubble3-4"  class="bigBubble">
  </div>
  </th>
  <th >
  <div id= "bigBubble4-4" class="bigBubble">
  </div>
  </th>
  <th >
  <th >
  <div style="padding-right: 50px;">
  </div>
  </th>
  <th >
  <div id= "smallBubble1-4" class="smallBubble">
  </div>
  </th>
  <th >
  <div id= "smallBubble2-4" class="smallBubble">
  </div>
  </th>
  <th >
  <div id= "smallBubble3-4" class="smallBubble">
  </div>
  </th>
  <th >
  <div id= "smallBubble4-4" class="smallBubble">
  </div>
  </th>
  </tr>

  <!-- New Line -->

  <tr>
  <th >
  <div id= "bigBubble1-5" class="bigBubble">
  </div>
  </th>
  <th >
  <div id= "bigBubble2-5" class="bigBubble">
  </div>
  </th>
  <th >
  <div id= "bigBubble3-5" class="bigBubble">
  </div>
  </th>
  <th >
  <div id= "bigBubble4-5" class="bigBubble">
  </div>
  </th>
  <th >
  <th >
  <div style="padding-right: 50px;">
  </div>
  </th>
  <th >
  <div id= "smallBubble1-5" class="smallBubble">
  </div>
  </th>
  <th >
  <div id= "smallBubble2-5" class="smallBubble">
  </div>
  </th>
  <th >
  <div id= "smallBubble3-5" class="smallBubble">
  </div>
  </th>
  <th >
  <div id= "smallBubble4-5" class="smallBubble">
  </div>
  </th>
  </tr>

  <!-- New Line -->

  <tr>
  <th >
  <div id= "bigBubble1-6" class="bigBubble">
  </div>
  </th>
  <th >
  <div id= "bigBubble2-6" class="bigBubble">
  </div>
  </th>
  <th >
  <div id= "bigBubble3-6" class="bigBubble">
  </div>
  </th>
  <th >
  <div id= "bigBubble4-6" class="bigBubble">
  </div>
  </th>
  <th >
  <th >
  <div style="padding-right: 50px;">
  </div>
  </th>
  <th >
  <div id= "smallBubble1-6" class="smallBubble">
  </div>
  </th>
  <th >
  <div id= "smallBubble2-6" class="smallBubble">
  </div>
  </th>
  <th >
  <div id= "smallBubble3-6" class="smallBubble">
  </div>
  </th>
  <th >
  <div id= "smallBubble4-6" class="smallBubble">
  </div>
  </th>
  </tr>

  <!-- New Line -->

  <tr>
  <th >
  <div id= "bigBubble1-7" class="bigBubble">
  </div>
  </th>
  <th >
  <div id= "bigBubble2-7" class="bigBubble">
  </div>
  </th>
  <th >
  <div id= "bigBubble3-7" class="bigBubble">
  </div>
  </th>
  <th >
  <div id= "bigBubble4-7" class="bigBubble">
  </div>
  </th>
  <th >
  <th>
  <div  style="padding-right: 50px;">
  </div>
  </th>
  <th>
  <div id= "smallBubble1-7" class="smallBubble">
  </div>
  </th>
  <th >
  <div id= "smallBubble2-7" class="smallBubble">
  </div>
  </th>
  <th >
  <div id= "smallBubble3-7" class="smallBubble">
  </div>
  </th>
  <th >
  <div id= "smallBubble4-7" class="smallBubble">
  </div>
  </th>
  </tr>

  <!-- New Line -->

  <tr>
  <th >
  <div id= "bigBubble1-8" class="bigBubble">
  </div>
  </th>
  <th >
  <div id= "bigBubble2-8" class="bigBubble">
  </div>
  </th>
  <th >
  <div id= "bigBubble3-8"  class="bigBubble">
  </div>
  </th>
  <th >
  <div id= "bigBubble4-8" class="bigBubble">
  </div>
  </th>
  <th >
  <th >
  <div style="padding-right: 50px;">
  </div>
  </th>
  <th >
  <div id= "smallBubble1-8" class="smallBubble">
  </div>
  </th>
  <th >
  <div id= "smallBubble2-8" class="smallBubble">
  </div>
  </th>
  <th >
  <div id= "smallBubble3-8" class="smallBubble">
  </div>
  </th>
  <th >
  <div id= "smallBubble4-8" class="smallBubble">
  </div>
  </th>
  </tr>
  <!-- New Line -->

  <tr>
  <th >
  <div id= "bigBubble1-9" class="bigBubble">
  </div>
  </th>
  <th >
  <div id= "bigBubble2-9" class="bigBubble">
  </div>
  </th>
  <th >
  <div id= "bigBubble3-9"  class="bigBubble">
  </div>
  </th>
  <th >
  <div id= "bigBubble4-9" class="bigBubble">
  </div>
  </th>
  <th >
  <th >
  <div style="padding-right: 50px;">
  </div>
  </th>
  <th >
  <div id= "smallBubble1-9" class="smallBubble">
  </div>
  </th>
  <th >
  <div id= "smallBubble2-9" class="smallBubble">
  </div>
  </th>
  <th >
  <div id= "smallBubble3-9" class="smallBubble">
  </div>
  </th>
  <th >
  <div id= "smallBubble4-9" class="smallBubble">
  </div>
  </th>
  </tr>
  <!-- New Line -->

  <tr>
  <th >
  <div id= "bigBubble1-10" class="bigBubble">
  </div>
  </th>
  <th >
  <div id= "bigBubble2-10" class="bigBubble">
  </div>
  </th>
  <th >
  <div id= "bigBubble3-10"  class="bigBubble">
  </div>
  </th>
  <th >
  <div id= "bigBubble4-10" class="bigBubble">
  </div>
  </th>
  <th >
  <th >
  <div style="padding-right: 50px;">
  </div>
  </th>
  <th >
  <div id= "smallBubble1-10" class="smallBubble">
  </div>
  </th>
  <th >
  <div id= "smallBubble2-10" class="smallBubble">
  </div>
  </th>
  <th >
  <div id= "smallBubble3-10" class="smallBubble">
  </div>
  </th>
  <th >
  <div id= "smallBubble4-10" class="smallBubble">
  </div>
  </th>
  </tr>
  <!-- New Line -->

  <tr>
  <th >
  <div id= "bigBubble1-11" class="bigBubble">
  </div>
  </th>
  <th >
  <div id= "bigBubble2-11" class="bigBubble">
  </div>
  </th>
  <th >
  <div id= "bigBubble3-11"  class="bigBubble">
  </div>
  </th>
  <th >
  <div id= "bigBubble4-11" class="bigBubble">
  </div>
  </th>
  <th >
  <th >
  <div style="padding-right: 50px;">
  </div>
  </th>
  <th >
  <div id= "smallBubble1-11" class="smallBubble">
  </div>
  </th>
  <th >
  <div id= "smallBubble2-11" class="smallBubble">
  </div>
  </th>
  <th >
  <div id= "smallBubble3-11" class="smallBubble">
  </div>
  </th>
  <th >
  <div id= "smallBubble4-11" class="smallBubble">
  </div>
  </th>
  </tr>

  <!-- New Line -->

  <tr>
  <th >
  <div id= "bigBubble1-12" class="bigBubble">
  </div>
  </th>
  <th >
  <div id= "bigBubble2-12" class="bigBubble">
  </div>
  </th>
  <th >
  <div id= "bigBubble3-12"  class="bigBubble">
  </div>
  </th>
  <th >
  <div id= "bigBubble4-12" class="bigBubble">
  </div>
  </th>
  <th >
  <th >
  <div style="padding-right: 50px;">
  </div>
  </th>
  <th >
  <div id= "smallBubble1-12" class="smallBubble">
  </div>
  </th>
  <th >
  <div id= "smallBubble2-12" class="smallBubble">
  </div>
  </th>
  <th >
  <div id= "smallBubble3-12" class="smallBubble">
  </div>
  </th>
  <th >
  <div id= "smallBubble4-12" class="smallBubble">
  </div>
  </th>
  </tr>


  </table>




  <script>

  var i = [1, 1, 1, 1];
  var num=13;
  var endOfGame = false;

function makeVisible(){
    document.getElementById("bubbleChoice").style["visibility"] = "visible";
    document.getElementById("1").style["background-color"]="red";
     document.getElementById("2").style["background-color"]="red";
      document.getElementById("3").style["background-color"]="red";
       document.getElementById("4").style["background-color"]="red";
 }

  function incI(id){
      i[id]++;
      if(i[id]==6) i[id]=0;
  }


  function switchColor(bubbleID,id){
      if(endOfGame){
          return;
      }
      var color = ["red", "blue", "yellow", "green", "white", "black"];

      document.getElementById(bubbleID).style["background-color"]=color[i[id]];
  }

  function sendRequest(){

      num--;
      if(endOfGame){
          return;
      }
      var Color1="Empty";
      var Color2="Empty";
      var Color3="Empty";
      var Color4="Empty";

      if(num==1){
          document.getElementById("displayOver").style["visibility"] = "visible";
          document.getElementById("displayOver").innerHTML = "Game Over";
          endOfGame =true;
      }
      // retrieve user choice
      var Color1 = document.getElementById("1").style.backgroundColor;
      // update history
      document.getElementById("bigBubble1-"+num+"").style["background-color"]=Color1;

      var Color2 = document.getElementById("2").style.backgroundColor;
      document.getElementById("bigBubble2-"+num+"").style["background-color"]=Color2;


      var Color3 = document.getElementById("3").style.backgroundColor;
      document.getElementById("bigBubble3-"+num+"").style["background-color"]=Color3;


      var Color4 = document.getElementById("4").style.backgroundColor;
      document.getElementById("bigBubble4-"+num+"").style["background-color"]=Color4;

      var xhttp = new XMLHttpRequest();
      xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {

        var response = xhttp.responseText; // this

        var rightClrsWellPlaced = response.split(":")[1].split("-")[0];
        var rightClrsBadPlaced = response.split(":")[1].split("-")[1];

        var rightClrsWellPlacedF = Number(rightClrsWellPlaced);
        var rightClrsBadPlacedF = Number(rightClrsBadPlaced);
        var sum = rightClrsWellPlacedF + rightClrsBadPlacedF;
         document.getElementById("display4").innerHTML = sum;
       document.getElementById("display3").innerHTML = rightClrsWellPlacedF;
       document.getElementById("display2").innerHTML = rightClrsBadPlacedF;
        document.getElementById("display1").innerHTML = num;
        var f = 1;
        while(f <= rightClrsWellPlacedF){

            document.getElementById("smallBubble"+f+"-"+num+"").style["background-color"]="red";
            f++;
        }

        while(f <= sum){

        document.getElementById("smallBubble"+f+"-"+num+"").style["background-color"]="black";
        f++;

        }


        if(rightClrsWellPlaced == 4) {
            document.getElementById("displayWin").style["visibility"] = "visible";
            document.getElementById("displayWin").innerHTML ="YOU WON !";
            endOfGame = true;
        }
        //var donne_json=JSON.parse(nom_de_la_requete.responseText)

        //document.getElementById("demo").innerHTML = this.responseText;
        // handle the request

    }

  };
  var url = "/play?submitClr1="+Color1+"&submitClr2="+Color2+"&submitClr3="+Color3+"&submitClr4="+Color4+"&query=update";
  xhttp.open("GET", url, true);
  xhttp.send();

  }


 </script>

 <noscript>

 <form method="post" action="play.html" >
<table style="margin-top: 300px; margin-left: 950px;">
<tr>
<td>
  <select name="submitClr1">
  <option value="red">Red</option>
    <option value="blue">Blue</option>
    <option value="yellow">Yellow</option>
    <option value="green">Green</option>
    <option value="white">White</option>
    <option value="black">Black</option>
  </select>
  </td>
  <td>
  <select name="submitClr2">
    <option value="red">Red</option>
    <option value="blue">Blue</option>
    <option value="yellow">Yellow</option>
    <option value="green">Green</option>
    <option value="white">White</option>
    <option value="black">Black</option>
  </select>
  </td>
  <td>
  <select name="submitClr3">
    <option value="red">Red</option>
    <option value="blue">Blue</option>
    <option value="yellow">Yellow</option>
    <option value="green">Green</option>
    <option value="white">White</option>
    <option value="black">Black</option>
  </select>
  </td>
  <td>
  <select name="submitClr4">
    <option value="red">Red</option>
    <option value="blue">Blue</option>
    <option value="yellow">Yellow</option>
    <option value="green">Green</option>
    <option value="white">White</option>
    <option value="black">Black</option>
  </select>
  </td>
  <td>
  <input name="query" type="submit">
  </td>
  </tr>
  </table>
</form>

 </noscript>

 <div id="bubbleChoice" class="choice">
 <table cellspacing="20" >
 <tr>
 <th>
<button id= "1" class="bigBubble"  onclick="switchColor('1',0); incI(0);"></button>
</th>
<th>
<button id= "2" class="bigBubble"  onclick="switchColor('2',1); incI(1);"></button>
</th>
<th>
<button id= "3" class="bigBubble"  onclick="switchColor('3',2); incI(2);"></button>
</th>
<th>
<button id= "4" class="bigBubble"  onclick="switchColor('4',3); incI(3);"></button>
</th>
</tr>
</table>
<button id="submit" onclick="sendRequest();">submit</button>

</div>

<p id="displayOver" class="errorMsg"></p>
<p id="displayWin" class="winMsg"></p>
</body>
</html>
